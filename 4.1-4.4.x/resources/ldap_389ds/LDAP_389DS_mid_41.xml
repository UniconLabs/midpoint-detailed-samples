<?xml version="1.0" encoding="UTF-8"?>
<objects xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
	xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
	xmlns:org="http://midpoint.evolveum.com/xml/ns/public/common/org-3">
	<resource xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3" xmlns:org="http://midpoint.evolveum.com/xml/ns/public/common/org-3" xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3" xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3" xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3" oid="3c36d9f5-6c28-4379-87ad-580674690e42" version="19">
    <name>389DS</name>
    <description>Example LDAP Connection to 389 DS.</description>    
        <connectorRef type="ConnectorType">
            <description>
                Reference to the Polygon LDAP connector. This is dynamic reference, it will be translated to
                OID during import.
            </description>
            <filter>
                <q:equal>
                <q:path>c:connectorType</q:path>
                    <q:value>org.identityconnectors.ldap.LdapConnector</q:value>
                </q:equal>
            </filter>
        </connectorRef>
    <connectorConfiguration xmlns:icfc="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/connector-schema-3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xsi:type="c:ConnectorConfigurationType">
        <icfc:configurationProperties xmlns:gen535="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/bundle/com.evolveum.polygon.connector-ldap/com.evolveum.polygon.connector.ldap.LdapConnector" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="icfc:ConfigurationPropertiesType">
            <gen535:host>ldap</gen535:host>
            <gen535:port>389</gen535:port>
            <gen535:bindDn>cn=Directory Manager</gen535:bindDn>            
            <gen535:baseContext>dc=example,dc=edu</gen535:baseContext>
            <gen535:vlvSortAttribute>uid</gen535:vlvSortAttribute>
            <gen535:uidAttribute>nsUniqueId</gen535:uidAttribute>
        </icfc:configurationProperties>
        <icfc:resultsHandlerConfiguration>
            <icfc:enableNormalizingResultsHandler>false</icfc:enableNormalizingResultsHandler>
            <icfc:enableFilteredResultsHandler>false</icfc:enableFilteredResultsHandler>
            <icfc:enableAttributesToGetSearchResultsHandler>false</icfc:enableAttributesToGetSearchResultsHandler>
        </icfc:resultsHandlerConfiguration>
    </connectorConfiguration>
    <schema>        
        <generationConstraints>
            <generateObjectClass>ri:inetOrgPerson</generateObjectClass>
            <generateObjectClass>ri:person</generateObjectClass>
            <generateObjectClass>ri:eduPerson</generateObjectClass>
            <generateObjectClass>ri:organizationalPerson</generateObjectClass>
            <generateObjectClass>ri:groupOfUniqueNames</generateObjectClass>
            <generateObjectClass>ri:groupOfNames</generateObjectClass>
            <generateObjectClass>ri:organizationalUnit</generateObjectClass>
        </generationConstraints>       
    </schema>
    <schemaHandling>
        <objectType id="7">
            <kind>account</kind>
            <intent>default</intent>
            <displayName>Default Account</displayName>
            <default>true</default>
            <objectClass>ri:inetOrgPerson</objectClass>
            <attribute id="9">
                <c:ref xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3">ri:dn</c:ref>
                <displayName>Distinguished Name</displayName>
                <matchingRule>distinguishedName</matchingRule>
                <outbound>
                    <source>
                        <c:path>$user/name</c:path>
                    </source>
                    <expression>
                        <script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xsi:type="c:ScriptExpressionEvaluatorType">
                            <code>
                                'cn=' + name + iterationToken + ',ou=People,dc=example,dc=edu'
                            </code>
                        </script>
                    </expression>
                </outbound>
            </attribute>
            <attribute id="10">
                <c:ref xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3">ri:nsUniqueId</c:ref>
                <displayName>Entry ID</displayName>
                <matchingRule>stringIgnoreCase</matchingRule>
            </attribute>
            <attribute id="11">
                <c:ref xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3">ri:cn</c:ref>
                <displayName>Common Name</displayName>
                <limitations>
                    <maxOccurs>1</maxOccurs>
                </limitations>
                <outbound>
                    <source>
                        <c:path>fullName</c:path>
                    </source>
                </outbound>
                <inbound id="16">
                    <target>
                        <c:path>fullName</c:path>
                    </target>
                </inbound>
            </attribute>
            <attribute id="12">
                <c:ref xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3">ri:sn</c:ref>
                <displayName>Surname</displayName>
                <tolerant>false</tolerant>
                <exclusiveStrong>false</exclusiveStrong>
                <outbound>
                    <source>
                        <c:path>familyName</c:path>
                    </source>
                </outbound>
                <inbound id="17">
                    <target>
                        <c:path>familyName</c:path>
                    </target>
                </inbound>
            </attribute>
            <attribute id="13">
                <c:ref xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3">ri:givenName</c:ref>
                <displayName>Given Name</displayName>
                <outbound>
                    <source>
                        <c:path>givenName</c:path>
                    </source>
                </outbound>
                <inbound id="18">
                    <target>
                        <c:path>givenName</c:path>
                    </target>
                </inbound>
            </attribute>
            <attribute id="14">
                <c:ref xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3">ri:uid</c:ref>
                <displayName>Login Name</displayName>
                <matchingRule>stringIgnoreCase</matchingRule>
                <tolerant>false</tolerant>
                <exclusiveStrong>false</exclusiveStrong>
                <outbound>
                    <strength>weak</strength>
                    <source>
                        <c:path>name</c:path>
                    </source>
                    <expression>
                        <script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xsi:type="c:ScriptExpressionEvaluatorType">
                            <code>
                                name + iterationToken
                            </code>
                        </script>
                    </expression>
                </outbound>
                <inbound id="19">
                    <target>
                        <c:path>name</c:path>
                    </target>
                </inbound>
            </attribute>
            <attribute id="21">
                <c:ref xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3">ri:mail</c:ref>
                <tolerant>true</tolerant>
                <exclusiveStrong>false</exclusiveStrong>
                <outbound>
                    <authoritative>true</authoritative>
                    <exclusive>false</exclusive>
                    <strength>normal</strength>
                    <source>
                        <c:path>emailAddress</c:path>
                    </source>
                </outbound>
                <inbound id="22">
                    <authoritative>true</authoritative>
                    <exclusive>false</exclusive>
                    <strength>normal</strength>
                    <target>
                        <c:path>emailAddress</c:path>
                    </target>
                </inbound>
            </attribute>
            <iteration>
                <maxIterations>5</maxIterations>
            </iteration>
            <credentials>
                <password xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xsi:type="c:ResourcePasswordDefinitionType">
                    <outbound>
                        <strength>strong</strength>
                        <expression>
                            <asIs xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="c:AsIsExpressionEvaluatorType"/>
                        </expression>
                    </outbound>
                </password>
            </credentials>
        </objectType>
    </schemaHandling>
    <capabilities>
        <cachingMetadata>
            <retrievalTimestamp>2020-07-16T12:12:37.434-05:00</retrievalTimestamp>
            <serialNumber>352ffb18291fdb4-3d7cf3bfdbe6c493</serialNumber>
        </cachingMetadata>
        <native xmlns:cap="http://midpoint.evolveum.com/xml/ns/public/resource/capabilities-3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xsi:type="c:CapabilityCollectionType">
            <cap:schema/>
            <cap:liveSync/>
            <cap:testConnection/>
            <cap:create/>
            <cap:update>
                <cap:delta>true</cap:delta>
                <cap:addRemoveAttributeValues>true</cap:addRemoveAttributeValues>
            </cap:update>
            <cap:delete/>
            <cap:script>
                <cap:host>
                    <cap:type>connector</cap:type>
                </cap:host>
            </cap:script>
            <cap:credentials>
                <cap:password>
                    <cap:returnedByDefault>false</cap:returnedByDefault>
                </cap:password>
            </cap:credentials>
            <cap:auxiliaryObjectClasses/>
            <cap:pagedSearch/>
            <cap:read>
                <cap:returnDefaultAttributesOption>true</cap:returnDefaultAttributesOption>
            </cap:read>
        </native>
    </capabilities>
    <consistency>
        <avoidDuplicateValues>true</avoidDuplicateValues>
    </consistency>
    <synchronization>
        <objectSynchronization>
            <name>Account sync</name>
            <objectClass>ri:inetOrgPerson</objectClass>
            <kind>account</kind>
            <intent>default</intent>
            <enabled>true</enabled>
            <correlation>
                <q:equal xmlns="">
                    <q:path>name</q:path>
                    <expression xmlns="">
                        <path xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3">declare namespace ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3";
                                $account/attributes/ri:uid</path>
                    </expression>
                </q:equal>
            </correlation>
            <reconcile>false</reconcile>
            <reaction>
                <situation>linked</situation>
                <synchronize>true</synchronize>
            </reaction>
            <reaction>
                <situation>deleted</situation>
                <action>
                    <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#deleteFocus</handlerUri>
                </action>
            </reaction>
            <reaction>
                <situation>unlinked</situation>
                <action>
                    <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#link</handlerUri>
                </action>
            </reaction>
            <reaction>
                <situation>unmatched</situation>
                <action>
                    <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#addFocus</handlerUri>
                </action>
            </reaction>
        </objectSynchronization>
    </synchronization>
</resource>

</objects>
